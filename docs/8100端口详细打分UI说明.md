# 8100ç«¯å£è¯¦ç»†æ‰“åˆ†UIç³»ç»Ÿè¯´æ˜

## ç³»ç»Ÿæ¦‚è¿°

8100ç«¯å£æä¾›äº†ç»¼åˆæ‰“åˆ†ç®—æ³•çš„Webæµ‹è¯•ç•Œé¢ï¼Œå®ç°äº†ä»ç®€åŒ–å¯¹æ¯”æ–‡ä»¶åˆ°è¯¦ç»†æ‰“åˆ†å†åˆ°ç»¼åˆæ±‡æ€»çš„å®Œæ•´æµç¨‹ã€‚

**è®¿é—®åœ°å€**: http://localhost:8100

## æ ¸å¿ƒæ¶æ„

### 1. è¯¦ç»†æ‰“åˆ†ç®—æ³•è°ƒç”¨é“¾è·¯

```
è¾“å…¥æ–‡ä»¶ â†’ L1/L2/L3åˆ†ç±» â†’ æ‰“åˆ†å¤„ç† â†’ è¾“å‡ºç»“æœ
```

#### 1.1 ç¨‹åºæ–‡ä»¶ä½ç½®

| ç»„ä»¶ | æ–‡ä»¶è·¯å¾„ | åŠŸèƒ½æè¿° |
|------|----------|----------|
| **UIæœåŠ¡å™¨** | `/root/projects/tencent-doc-manager/integrated_scoring_test_server.py` | æä¾›Webç•Œé¢å’ŒAPIæ¥å£ |
| **æ‰“åˆ†å¼•æ“** | `/root/projects/tencent-doc-manager/production/scoring_engine/integrated_scorer.py` | è¯¦ç»†æ‰“åˆ†æ ¸å¿ƒé€»è¾‘ |
| **L2åˆ†æå™¨** | `/root/projects/tencent-doc-manager/production/core_modules/l2_semantic_analysis_two_layer.py` | L2åˆ—AIè¯­ä¹‰åˆ†æ |
| **APIå®¢æˆ·ç«¯** | `/root/projects/tencent-doc-manager/production/core_modules/deepseek_client.py` | DeepSeek APIè°ƒç”¨ |
| **ç»¼åˆæ±‡æ€»å™¨** | `/root/projects/tencent-doc-manager/production/scoring_engine/comprehensive_aggregator.py` | åˆ—çº§æ±‡æ€»å¤„ç† |

#### 1.2 è¾“å…¥è¾“å‡ºæ–‡ä»¶

| ç±»å‹ | è·¯å¾„æ¨¡å¼ | è¯´æ˜ |
|------|----------|------|
| **è¾“å…¥** | `/root/projects/tencent-doc-manager/comparison_results/simplified_*.json` | æ ‡å‡†åŒ–åçš„å¯¹æ¯”æ–‡ä»¶ |
| **è¯¦ç»†æ‰“åˆ†è¾“å‡º** | `/root/projects/scoring_results/detailed/detailed_score_*.json` | æ ¼å­çº§æ‰“åˆ†ç»“æœ |
| **ç»¼åˆæ±‡æ€»è¾“å‡º** | `/root/projects/tencent-doc-manager/csv_security_results/*_comprehensive.json` | åˆ—çº§æ±‡æ€»æŠ¥å‘Š |
| **L2åˆ†æç¼“å­˜** | `/root/projects/tencent-doc-manager/semantic_results/2025_W36/*.json` | AIåˆ†æç»“æœç¼“å­˜ |

## L1/L2/L3åˆ†ç±»æ‰“åˆ†ç­–ç•¥

### L1åˆ—ï¼ˆé«˜é£é™©ï¼‰
- **åŸºç¡€åˆ†**: 0.8
- **å¤„ç†æ–¹å¼**: çº¯è§„åˆ™æ‰“åˆ†
- **AIä½¿ç”¨**: å¦
- **å…¸å‹åˆ—**: é‡è¦ç¨‹åº¦ã€ä¸šåŠ¡å˜æ›´ã€å…·ä½“é—®é¢˜ã€é£é™©ç­‰çº§ç­‰

### L2åˆ—ï¼ˆä¸­é£é™©ï¼‰â­é‡ç‚¹
- **åŸºç¡€åˆ†**: 0.5
- **å¤„ç†æ–¹å¼**: **å¿…é¡»ä½¿ç”¨AIè¯­ä¹‰åˆ†æ**
- **AIä½¿ç”¨**: æ˜¯ï¼ˆå¼ºåˆ¶ï¼Œä¸å…è®¸é™çº§ï¼‰
- **å…¸å‹åˆ—**: é¡¹ç›®ç±»å‹ã€å…·ä½“è®¡åˆ’å†…å®¹ã€é‚“æ€»æŒ‡å¯¼ç™»è®°ã€è´Ÿè´£äººã€ååŠ©äººã€ç›‘ç£äººã€å½¢æˆè®¡åˆ’æ¸…å•
- **ä¸¤å±‚AIæ¶æ„**:
  - ç¬¬ä¸€å±‚ï¼šå¿«é€Ÿç­›é€‰ï¼ˆ67%é€šè¿‡ç‡ï¼‰
  - ç¬¬äºŒå±‚ï¼šæ·±åº¦åˆ†æï¼ˆ33%éœ€è¦æ·±å…¥è¯„ä¼°ï¼‰

### L3åˆ—ï¼ˆä½é£é™©ï¼‰
- **åŸºç¡€åˆ†**: 0.2
- **å¤„ç†æ–¹å¼**: çº¯è§„åˆ™æ‰“åˆ†
- **AIä½¿ç”¨**: å¦
- **å…¸å‹åˆ—**: å…¶ä»–æœªåˆ†ç±»åˆ—

## L2è¯­ä¹‰åˆ†æè¯¦ç»†æµç¨‹

### è°ƒç”¨é“¾è·¯å›¾

```
integrated_scorer.py::process_l2_modification(mod)
    â†“
æ£€æŸ¥AIæœåŠ¡å¯ç”¨æ€§
    â†“ å¦‚æœä¸å¯ç”¨ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼ˆç¦æ­¢é™çº§ï¼‰
l2_analyzer.analyze_single_modification(mod)
    â†“
build_layer1_prompt() â†’ DeepSeek APIè°ƒç”¨
    â†“
åˆ¤æ–­æ˜¯å¦éœ€è¦ç¬¬äºŒå±‚ï¼ˆRISKY/UNSUREæˆ–ç½®ä¿¡åº¦<70ï¼‰
    â†“ å¦‚æœéœ€è¦
build_layer2_prompt() â†’ DeepSeek APIè°ƒç”¨
    â†“
è¿”å›åˆ†æç»“æœ {
    'layer1_result': {...},
    'layer2_result': {...},  // å¯é€‰
    'final_decision': 'APPROVE/REVIEW/REJECT',
    'approval_required': bool
}
    â†“
è®¡ç®—AIè°ƒæ•´ç³»æ•°å’Œç½®ä¿¡åº¦æƒé‡
    â†“
æœ€ç»ˆå¾—åˆ† = 0.5 Ã— å˜æ›´ç³»æ•° Ã— é‡è¦æ€§æƒé‡ Ã— AIè°ƒæ•´ç³»æ•° Ã— ç½®ä¿¡åº¦åŠ æƒ
```

### AIå†³ç­–æ˜ å°„

| AIå†³ç­– | è°ƒæ•´ç³»æ•° | è¯´æ˜ |
|--------|----------|------|
| APPROVE | 0.6 | å˜æ›´åˆç†ï¼Œé£é™©è¾ƒä½ |
| CONDITIONAL | 0.8 | æœ‰æ¡ä»¶æ‰¹å‡† |
| REVIEW | 1.2 | éœ€è¦äººå·¥å®¡æ ¸ |
| REJECT | 1.5 | æ‹’ç»ï¼Œé«˜é£é™© |
| UNSURE | 1.0 | ä¸ç¡®å®šï¼Œä¿æŒä¸­ç«‹ |

### ç½®ä¿¡åº¦æƒé‡

| ç½®ä¿¡åº¦èŒƒå›´ | æƒé‡ |
|------------|------|
| â‰¥90% | 1.0 |
| 70-89% | 0.9 |
| 50-69% | 0.8 |
| <50% | 0.7 |

## æ‰“åˆ†å…¬å¼è¯¦è§£

```python
# æ ¸å¿ƒå…¬å¼
æœ€ç»ˆå¾—åˆ† = min(
    åŸºç¡€é£é™©åˆ† Ã— å˜æ›´ç³»æ•° Ã— é‡è¦æ€§æƒé‡ Ã— AIè°ƒæ•´ç³»æ•° Ã— ç½®ä¿¡åº¦åŠ æƒ,
    1.0  # ä¸Šé™æˆªæ–­
)

# å˜æ›´ç³»æ•°è®¡ç®—
- å®Œå…¨åˆ é™¤: 1.5
- å†…å®¹å˜æ›´: 1.0-1.2
- æ ¼å¼è°ƒæ•´: 0.7
- æ–°å¢å†…å®¹: 0.8

# é‡è¦æ€§æƒé‡
- å…³é”®åˆ—ï¼ˆå¦‚"é‡è¦ç¨‹åº¦"ï¼‰: 1.4
- æ ‡å‡†åˆ—: 1.0
- ä½å½±å“åˆ—: 0.8
```

## é£é™©ç­‰çº§åˆ’åˆ†

| åˆ†æ•°èŒƒå›´ | é£é™©ç­‰çº§ | é¢œè‰²æ ‡è®° | å›¾æ ‡ | è¡ŒåŠ¨è¦æ±‚ |
|----------|----------|----------|------|----------|
| â‰¥0.8 | EXTREME_HIGH | çº¢è‰² | ğŸ”´ | ç«‹å³å®¡æ ¸ |
| 0.6-0.8 | HIGH | æ©™è‰² | ğŸŸ  | äººå·¥å®¡æ ¸ |
| 0.4-0.6 | MEDIUM | é»„è‰² | ğŸŸ¡ | å®šæœŸæ£€æŸ¥ |
| 0.2-0.4 | LOW | ç»¿è‰² | ğŸŸ¢ | ä»…è®°å½• |
| <0.2 | EXTREME_LOW | è“è‰² | ğŸ”µ | æ— éœ€æ“ä½œ |

## ç³»ç»Ÿç‰¹æ€§

### å¼ºåˆ¶å¤±è´¥åŸåˆ™
- L2åˆ—å¿…é¡»ä½¿ç”¨AIåˆ†æï¼Œå¦‚æœAIæœåŠ¡ä¸å¯ç”¨ï¼Œç³»ç»Ÿå°†æŠ¥é”™è€Œéé™çº§
- ä¸å…è®¸ä»»ä½•å½¢å¼çš„é™çº§ã€å¤‡ç”¨æˆ–ç®€åŒ–æ–¹æ³•
- ç¡®ä¿L2åˆ—çš„è¯­ä¹‰åˆ†æè´¨é‡

### æ€§èƒ½ä¼˜åŒ–
- æ‰¹é‡å¤„ç†ï¼šL2åˆ—æŒ‰æ‰¹æ¬¡ï¼ˆæ¯æ‰¹20ä¸ªï¼‰è°ƒç”¨AI
- ä¸¤å±‚æ¶æ„ï¼š67%çš„ä¿®æ”¹åœ¨ç¬¬ä¸€å±‚å¿«é€Ÿé€šè¿‡ï¼ŒèŠ‚çœToken
- ç¼“å­˜æœºåˆ¶ï¼šç›¸åŒä¿®æ”¹ä¸é‡å¤è°ƒç”¨AI

### ç›‘æ§æŒ‡æ ‡
- AIè°ƒç”¨æˆåŠŸç‡
- Tokenæ¶ˆè€—ç»Ÿè®¡
- å„é£é™©ç­‰çº§åˆ†å¸ƒ
- L2åˆ—AIä»‹å…¥ç‡

## ä½¿ç”¨ç¤ºä¾‹

### 1. æ‰§è¡Œè¯¦ç»†æ‰“åˆ†
```
è¾“å…¥: /root/projects/tencent-doc-manager/comparison_results/simplified_*.json
è¾“å‡º: /root/projects/scoring_results/detailed/detailed_score_*.json
```

### 2. æŸ¥çœ‹L2åˆ†æç»“æœ
æ‰“å¼€è¾“å‡ºæ–‡ä»¶ï¼ŒæŸ¥æ‰¾column_levelä¸º"L2"çš„é¡¹ï¼Œå¯çœ‹åˆ°ï¼š
- ai_analysiså­—æ®µåŒ…å«å®Œæ•´çš„AIåˆ†æç»“æœ
- layer1_result: ç¬¬ä¸€å±‚å¿«é€Ÿç­›é€‰ç»“æœ
- layer2_result: ç¬¬äºŒå±‚æ·±åº¦åˆ†æç»“æœï¼ˆå¦‚æœ‰ï¼‰
- final_decision: æœ€ç»ˆAIå†³ç­–
- confidence: AIç½®ä¿¡åº¦

### 3. ç»¼åˆæ±‡æ€»
å°†å¤šä¸ªè¯¦ç»†æ‰“åˆ†æ–‡ä»¶æ±‡æ€»ä¸ºåˆ—çº§æŠ¥å‘Šï¼Œåˆ†æé£é™©è¶‹åŠ¿å’Œæ¨¡å¼ã€‚

## æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

1. **L2åˆ—æ‰“åˆ†å¤±è´¥**
   - æ£€æŸ¥ç¯å¢ƒå˜é‡ï¼š`echo $DEEPSEEK_API_KEY`
   - ç¡®è®¤APIå¯†é’¥æœ‰æ•ˆ
   - æŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼š`/root/projects/tencent-doc-manager/logs/`

2. **AIæœåŠ¡ä¸å¯ç”¨**
   - ç³»ç»Ÿå°†æ‹’ç»å¤„ç†å¹¶æŠ¥é”™ï¼ˆè®¾è®¡å¦‚æ­¤ï¼Œç¦æ­¢é™çº§ï¼‰
   - éœ€è¦é…ç½®æœ‰æ•ˆçš„DeepSeek APIå¯†é’¥

3. **è¾“å‡ºæ–‡ä»¶ä¸ºç©º**
   - æ£€æŸ¥è¾“å…¥æ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤column_nameå­—æ®µå­˜åœ¨

## é…ç½®è¦æ±‚

### ç¯å¢ƒå˜é‡
```bash
export DEEPSEEK_API_KEY="your_api_key_here"
```

### Pythonä¾èµ–
- Flask >= 2.0
- flask-cors
- pandasï¼ˆç”¨äºæ•°æ®å¤„ç†ï¼‰
- å…¶ä»–è§requirements.txt

## æ›´æ–°å†å²

- **2025-09-08**: å¼ºåˆ¶L2åˆ—ä½¿ç”¨AIï¼Œç§»é™¤æ‰€æœ‰é™çº§æ–¹æ³•
- **2025-09-07**: å®ç°ä¸¤å±‚AIæ¶æ„ï¼Œä¼˜åŒ–Tokenä½¿ç”¨
- **2025-09-06**: åˆå§‹ç‰ˆæœ¬ï¼Œæ”¯æŒL1/L2/L3åˆ†ç±»æ‰“åˆ†