# 路径特殊说明文档
## Path Special Notes Document

生成时间: 2025-09-09
版本: 1.0

---

## ⚠️ 重要路径差异说明

### 1. 详细打分文件的特殊存储位置

**问题描述**：
详细打分文件（detailed_score_*.json）的实际存储路径与项目其他文件不一致。

**实际路径结构**：
```
/root/projects/
├── scoring_results/              # ← 注意：直接在projects下，不在tencent-doc-manager内
│   └── detailed/                 # 详细打分文件实际存储位置
│       └── detailed_score_*.json
│
└── tencent-doc-manager/          # 项目主目录
    ├── scoring_results/          # 预留目录结构
    │   ├── detailed/             # 空目录（仅创建，未使用）
    │   └── comprehensive/        # 综合打分输出位置（正常使用）
    └── ...
```

### 2. 路径差异原因

**技术原因**：
- `integrated_scorer.py` 运行时自动计算输出路径
- 基于输入文件的祖父目录（`../../`）来确定输出位置
- 当输入文件在 `/root/projects/tencent-doc-manager/comparison_results/` 时
- 程序向上两级到达 `/root/projects/`，然后创建 `scoring_results/detailed/`

**代码逻辑**（integrated_scorer.py）：
```python
# 自动计算输出目录
project_root = os.path.dirname(os.path.dirname(input_file_path))
output_dir = os.path.join(project_root, 'scoring_results', 'detailed')
```

### 3. 各模块文件路径对照表

| 模块 | 功能 | 输入路径 | 输出路径 | 特殊说明 |
|------|------|----------|----------|----------|
| **模块1** | 详细打分 | `/root/projects/tencent-doc-manager/comparison_results/simplified_*.json` | `/root/projects/scoring_results/detailed/` | ⚠️ 输出在项目根目录 |
| **模块2** | 综合汇总 | `/root/projects/scoring_results/detailed/detailed_score_*.json` | `/root/projects/tencent-doc-manager/scoring_results/comprehensive/` | 输入来自项目根目录 |

### 4. 正确的文件访问方式

**查看详细打分文件**：
```bash
# 正确 ✅
ls /root/projects/scoring_results/detailed/

# 错误 ❌
ls /root/projects/tencent-doc-manager/scoring_results/detailed/
```

**查看综合打分文件**：
```bash
# 正确 ✅
ls /root/projects/tencent-doc-manager/scoring_results/comprehensive/
```

### 5. 为什么不修复这个路径差异？

1. **兼容性考虑**：现有系统已经基于这个路径结构运行
2. **数据已存在**：已有14个详细打分文件存储在该位置
3. **逻辑分离**：详细打分作为中间结果，存储在项目外可能有其设计考虑

### 6. UI显示更新

8100端口的UI已更新，明确标注了这个路径特殊性：
- 在模块2的核心文件位置添加了红色警告提示
- 说明详细打分文件存储在 `/root/projects/` 根目录下

### 7. 建议

如果需要统一路径结构，建议：
1. 修改 `integrated_scorer.py` 的路径计算逻辑
2. 迁移现有详细打分文件到统一位置
3. 更新所有相关文档和UI显示

---

## 📝 更新记录

- 2025-09-09：创建文档，说明路径差异问题
- 2025-09-09：更新8100端口UI，添加路径特殊性提示

---

**文档结束**