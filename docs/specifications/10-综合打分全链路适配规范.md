# 10-ç»¼åˆæ‰“åˆ†å…¨é“¾è·¯é€‚é…è§„èŒƒ

## ğŸ“‹ æ–‡æ¡£æ¦‚è¿°

**ç‰ˆæœ¬**: 4.0ï¼ˆç»Ÿä¸€è§„èŒƒç‰ˆï¼‰
**æ›´æ–°æ—¥æœŸ**: 2025-09-16
**çŠ¶æ€**: âœ… **ç»Ÿä¸€ç®¡ç†è§„èŒƒ**
**ç›®çš„**: å®šä¹‰ä»CSVå¯¹æ¯”åˆ°UIå±•ç¤ºçš„å®Œæ•´æ•°æ®é“¾è·¯ï¼Œç»Ÿä¸€æ‰“åˆ†ç®—æ³•ï¼Œé›†ä¸­é…ç½®ç®¡ç†

### ğŸ“Œ æœ¬è§„èŒƒçš„èŒè´£èŒƒå›´
- **åŒ…å«**: æ ‡å‡†åˆ—å®šä¹‰ã€L1/L2/L3åˆ†ç±»ã€æ‰“åˆ†ç®—æ³•ã€æ•°æ®é“¾è·¯ã€UIå‚æ•°æ˜ å°„
- **ä¸åŒ…å«**: çƒ­åŠ›å›¾æ¸²æŸ“ç®—æ³•ï¼ˆè§09è§„èŒƒï¼‰ã€é…ç½®æ–‡ä»¶æ ¼å¼ï¼ˆè§11è§„èŒƒï¼‰

---

## ç¬¬ä¸€éƒ¨åˆ†ï¼šæ ‡å‡†åˆ—å®šä¹‰ä¸é£é™©åˆ†çº§

### ğŸ” æ ‡å‡†19åˆ—å®šä¹‰ï¼ˆå”¯ä¸€æƒå¨ï¼‰

```python
# è¿™æ˜¯æ•´ä¸ªç³»ç»Ÿçš„å”¯ä¸€æ ‡å‡†åˆ—å®šä¹‰
# åŒæ­¥ä½ç½®ï¼š/root/projects/tencent-doc-manager/standard_columns_config.py
STANDARD_COLUMNS = [
    "åºå·",           # 0 - L3
    "é¡¹ç›®ç±»å‹",       # 1 - L2
    "æ¥æº",           # 2 - L1
    "ä»»åŠ¡å‘èµ·æ—¶é—´",   # 3 - L1
    "ç›®æ ‡å¯¹é½",       # 4 - L1
    "å…³é”®KRå¯¹é½",     # 5 - L1
    "å…·ä½“è®¡åˆ’å†…å®¹",   # 6 - L2
    "é‚“æ€»æŒ‡å¯¼ç™»è®°",   # 7 - L2
    "è´Ÿè´£äºº",         # 8 - L2
    "ååŠ©äºº",         # 9 - L2
    "ç›‘ç£äºº",         # 10 - L2
    "é‡è¦ç¨‹åº¦",       # 11 - L1
    "é¢„è®¡å®Œæˆæ—¶é—´",   # 12 - L1
    "å®Œæˆè¿›åº¦",       # 13 - L1
    "å®Œæˆé“¾æ¥",       # 14 - L3ï¼ˆä¿®æ­£ï¼šåŸä¸º"å®Œæˆé“¾æ¥"ï¼‰
    "ç»ç†åˆ†æå¤ç›˜",   # 15 - L3ï¼ˆä¿®æ­£ï¼šåŸä¸º"æœ€æ–°å¤ç›˜æ—¶é—´"ï¼‰
    "æœ€æ–°å¤ç›˜æ—¶é—´",   # 16 - L3ï¼ˆæ–°å¢ï¼‰
    "å¯¹ä¸Šæ±‡æŠ¥",       # 17 - L3
    "åº”ç”¨æƒ…å†µ"        # 18 - L3ï¼ˆä¿®æ­£ï¼šåŸä¸º"ç»ç†åˆ†æå¤ç›˜"ï¼‰
]
```

### ğŸ¯ L1/L2/L3é£é™©åˆ†çº§å®šä¹‰

#### L1çº§ - æé«˜é£é™©åˆ—ï¼ˆ7åˆ—ï¼‰
```python
L1_COLUMNS = [
    "æ¥æº",           # æ•°æ®æ¥æºå˜æ›´å½±å“åˆ†æåŸºç¡€
    "ä»»åŠ¡å‘èµ·æ—¶é—´",   # æ—¶é—´çº¿å˜æ›´å½±å“é¡¹ç›®è®¡åˆ’
    "ç›®æ ‡å¯¹é½",       # æˆ˜ç•¥ç›®æ ‡å˜æ›´å½±å“å†³ç­–
    "å…³é”®KRå¯¹é½",     # å…³é”®ç»“æœå˜æ›´å½±å“ç»©æ•ˆ
    "é‡è¦ç¨‹åº¦",       # ä¼˜å…ˆçº§å˜æ›´å½±å“èµ„æºåˆ†é…
    "é¢„è®¡å®Œæˆæ—¶é—´",   # æˆªæ­¢æ—¥æœŸå˜æ›´å½±å“äº¤ä»˜
    "å®Œæˆè¿›åº¦"        # è¿›åº¦å˜æ›´å½±å“é¡¹ç›®çŠ¶æ€
]
```

#### L2çº§ - é«˜é£é™©åˆ—ï¼ˆ6åˆ—ï¼‰
```python
L2_COLUMNS = [
    "é¡¹ç›®ç±»å‹",       # ç±»å‹å˜æ›´å½±å“ç®¡ç†æ–¹å¼
    "å…·ä½“è®¡åˆ’å†…å®¹",   # å†…å®¹å˜æ›´éœ€è¦è¯­ä¹‰åˆ†æ
    "é‚“æ€»æŒ‡å¯¼ç™»è®°",   # é«˜å±‚æŒ‡å¯¼éœ€è¦ç‰¹åˆ«å…³æ³¨
    "è´Ÿè´£äºº",         # è´£ä»»äººå˜æ›´å½±å“æ‰§è¡Œ
    "ååŠ©äºº",         # åä½œå˜æ›´å½±å“é…åˆ
    "ç›‘ç£äºº"          # ç›‘ç£å˜æ›´å½±å“è´¨é‡
]
```

#### L3çº§ - ä¸€èˆ¬é£é™©åˆ—ï¼ˆ6åˆ—ï¼‰
```python
L3_COLUMNS = [
    "åºå·",           # ä»…æ ¼å¼å½±å“
    "å®Œæˆé“¾æ¥",       # å‚è€ƒé“¾æ¥
    "ç»ç†åˆ†æå¤ç›˜",   # åˆ†æè®°å½•
    "æœ€æ–°å¤ç›˜æ—¶é—´",   # è®°å½•æ€§è´¨
    "å¯¹ä¸Šæ±‡æŠ¥",       # ä¿¡æ¯åŒæ­¥
    "åº”ç”¨æƒ…å†µ"        # çŠ¶æ€è®°å½•
]
```

---

## ç¬¬äºŒéƒ¨åˆ†ï¼šç»Ÿä¸€æ‰“åˆ†ç®—æ³•

### ğŸ“Š æ‰“åˆ†ç®—æ³•æ ¸å¿ƒå…¬å¼

#### 1. åŸºç¡€åˆ†è®¡ç®—
```python
def calculate_base_score(column_level):
    """æ ¹æ®åˆ—çº§åˆ«è¿”å›åŸºç¡€åˆ†"""
    if column_level == "L1":
        return 0.8  # L1åŸºç¡€åˆ†
    elif column_level == "L2":
        return 0.5  # L2åŸºç¡€åˆ†
    else:  # L3
        return 0.2  # L3åŸºç¡€åˆ†
```

#### 2. å˜æ›´ç³»æ•°è®¡ç®—
```python
def calculate_change_factor(modification_count, total_rows):
    """è®¡ç®—å˜æ›´ç³»æ•°"""
    if total_rows == 0:
        return 1.0

    ratio = modification_count / total_rows

    if ratio > 0.5:
        return 1.3  # å¤§é‡ä¿®æ”¹
    elif ratio > 0.3:
        return 1.2  # ä¸­ç­‰ä¿®æ”¹
    elif ratio > 0.1:
        return 1.1  # å°‘é‡ä¿®æ”¹
    else:
        return 1.0  # æå°‘ä¿®æ”¹
```

#### 3. åˆ—æƒé‡å®šä¹‰
```python
COLUMN_WEIGHTS = {
    # L1åˆ—æƒé‡
    "é‡è¦ç¨‹åº¦": 1.4,
    "ä»»åŠ¡å‘èµ·æ—¶é—´": 1.3,
    "é¢„è®¡å®Œæˆæ—¶é—´": 1.3,
    "å®Œæˆè¿›åº¦": 1.1,
    # L2åˆ—æƒé‡
    "è´Ÿè´£äºº": 1.2,
    "é‚“æ€»æŒ‡å¯¼ç™»è®°": 1.15,
    "é¡¹ç›®ç±»å‹": 1.1,
    # å…¶ä»–åˆ—é»˜è®¤æƒé‡1.0
}
```

#### 4. æœ€ç»ˆåˆ†æ•°è®¡ç®—
```python
def calculate_final_score(modification_count, total_rows, column_name):
    """è®¡ç®—æœ€ç»ˆåˆ†æ•°"""
    # æ— ä¿®æ”¹æ—¶è¿”å›èƒŒæ™¯å€¼
    if modification_count == 0:
        return 0.05

    # è·å–åˆ—çº§åˆ«
    column_level = get_column_level(column_name)

    # è®¡ç®—å„é¡¹å› å­
    base_score = calculate_base_score(column_level)
    change_factor = calculate_change_factor(modification_count, total_rows)
    column_weight = COLUMN_WEIGHTS.get(column_name, 1.0)

    # è®¡ç®—æœ€ç»ˆåˆ†æ•°
    score = base_score * change_factor * column_weight

    # å¼ºåˆ¶é˜ˆå€¼ï¼ˆé‡è¦ï¼ï¼‰
    if column_level == "L1" and score > 0:
        score = max(0.8, score)  # L1å¼ºåˆ¶æœ€ä½0.8åˆ†
    elif column_level == "L2" and score > 0:
        score = max(0.6, score)  # L2å¼ºåˆ¶æœ€ä½0.6åˆ†

    return min(1.0, round(score, 2))
```

### ğŸ¨ åˆ†æ•°åˆ°é¢œè‰²æ˜ å°„

| åˆ†æ•°èŒƒå›´ | é¢œè‰² | RGBå€¼ | å«ä¹‰ |
|---------|------|-------|------|
| 0.8-1.0 | çº¢è‰² | #FF0000-#FFCCCC | æé«˜é£é™© |
| 0.6-0.8 | æ©™è‰² | #FF8800-#FFCC88 | é«˜é£é™© |
| 0.4-0.6 | é»„è‰² | #FFFF00-#FFFFCC | ä¸­é£é™© |
| 0.2-0.4 | ç»¿è‰² | #00FF00-#CCFFCC | ä½é£é™© |
| 0.05-0.2 | è“è‰² | #0088FF-#CCE5FF | æä½é£é™© |
| 0-0.05 | ç°è‰² | #F0F0F0 | æ— ä¿®æ”¹ |

---

## ç¬¬ä¸‰éƒ¨åˆ†ï¼šå®Œæ•´æ•°æ®é“¾è·¯

### ğŸ”„ æ•°æ®æµç¨‹æ¶æ„

```
æ­¥éª¤1: CSVæ–‡ä»¶å¯¹æ¯”
â”œâ”€â”€ baselineæ–‡ä»¶ï¼ˆåŸºçº¿ç‰ˆæœ¬ï¼‰
â”œâ”€â”€ currentæ–‡ä»¶ï¼ˆå½“å‰ç‰ˆæœ¬ï¼‰
â””â”€â”€ ç”Ÿæˆdifferences.json

æ­¥éª¤2: è¯¦ç»†æ‰“åˆ†ï¼ˆcomparison_to_scoring_adapter.pyï¼‰
â”œâ”€â”€ extract_table_data() - æå–ä¿®æ”¹æ•°æ®
â”œâ”€â”€ _get_column_level() - è·å–L1/L2/L3çº§åˆ«
â”œâ”€â”€ _calculate_column_score() - è®¡ç®—åˆ†æ•°
â””â”€â”€ è¾“å‡º: table_data_list

æ­¥éª¤3: ç»¼åˆæ‰“åˆ†ç”Ÿæˆï¼ˆcomprehensive_score_generator_v2.pyï¼‰
â”œâ”€â”€ æ•´åˆå¤šè¡¨æ•°æ®
â”œâ”€â”€ ç”ŸæˆNÃ—19çŸ©é˜µ
â”œâ”€â”€ è®¡ç®—ç»Ÿè®¡ä¿¡æ¯
â””â”€â”€ è¾“å‡º: comprehensive_score_W{å‘¨æ•°}_{æ—¶é—´æˆ³}.json

æ­¥éª¤4: UIæ•°æ®æœåŠ¡ï¼ˆfinal_heatmap_server.pyï¼‰
â”œâ”€â”€ åŠ è½½ç»¼åˆæ‰“åˆ†æ–‡ä»¶
â”œâ”€â”€ æä¾›APIç«¯ç‚¹
â”œâ”€â”€ æ•°æ®æ ¼å¼è½¬æ¢
â””â”€â”€ è¾“å‡º: JSON APIå“åº”

æ­¥éª¤5: å‰ç«¯å±•ç¤ºï¼ˆReactç»„ä»¶ï¼‰
â”œâ”€â”€ è·å–APIæ•°æ®
â”œâ”€â”€ æ¸²æŸ“çƒ­åŠ›å›¾
â”œâ”€â”€ ç”¨æˆ·äº¤äº’å¤„ç†
â””â”€â”€ è¾“å‡º: å¯è§†åŒ–ç•Œé¢
```

### ğŸ“ æ•°æ®æ ¼å¼è§„èŒƒ

#### CSVå¯¹æ¯”ç»“æœæ ¼å¼
```json
{
  "differences": [
    {
      "è¡Œå·": 5,
      "åˆ—å": "è´Ÿè´£äºº",
      "åˆ—ç´¢å¼•": 8,
      "åŸå€¼": "å¼ ä¸‰",
      "æ–°å€¼": "æå››",
      "risk_level": "L2",
      "risk_score": 0.65
    }
  ]
}
```

#### ç»¼åˆæ‰“åˆ†æ–‡ä»¶æ ¼å¼
```json
{
  "metadata": {
    "version": "2.0",
    "week": "W38",
    "timestamp": "2025-09-16T12:00:00",
    "total_params": 5200
  },
  "table_names": ["è¡¨1", "è¡¨2", ...],
  "column_names": [19ä¸ªæ ‡å‡†åˆ—],
  "heatmap_data": {
    "matrix": [[NÃ—19çš„äºŒç»´æ•°ç»„]]
  },
  "table_details": [...],
  "hover_data": {...},
  "statistics": {...}
}
```

---

## ç¬¬å››éƒ¨åˆ†ï¼šUIå‚æ•°æ˜ å°„ï¼ˆåˆå¹¶è‡ª11è§„èŒƒï¼‰

### ğŸ–¥ï¸ UIæ•°æ®éœ€æ±‚æ˜ å°„è¡¨

| UIéœ€æ±‚å‚æ•° | JSONå­—æ®µè·¯å¾„ | æ•°æ®æ¥æº | è¯´æ˜ |
|-----------|-------------|----------|------|
| è¡¨åä½œä¸ºè¡Œå | `table_names[]` | CSVæ–‡ä»¶å | çƒ­åŠ›å›¾Yè½´ |
| åˆ—å | `column_names[]` | æ ‡å‡†19åˆ— | çƒ­åŠ›å›¾Xè½´ |
| çƒ­åŠ›å›¾æ•°å€¼ | `heatmap_data.matrix[][]` | æ‰“åˆ†ç®—æ³• | æ ¼å­é¢œè‰²å€¼ |
| æ‚¬æµ®çª—ä¿®æ”¹æ•° | `hover_data.data[].column_modifications[]` | å¯¹æ¯”ç»“æœ | æ¯è¡¨æ¯åˆ—ä¿®æ”¹æ•° |
| è¡¨æ€»ä¿®æ”¹æ•° | `statistics.table_modifications[]` | ç»Ÿè®¡è®¡ç®— | å³ä¾§ç»Ÿè®¡æ  |
| è¡¨æ€»è¡Œæ•° | `statistics.table_row_counts[]` | CSVè¡Œæ•° | ä¸€ç»´å›¾åŸºç¡€ |
| ä¿®æ”¹è¡Œä½ç½® | `table_details[].column_details[].modified_rows[]` | å¯¹æ¯”ç»“æœ | ä¸€ç»´å›¾è¯¦ç»† |
| Excel URL | `table_details[].excel_url` | é…ç½®æ–‡ä»¶ | ç‚¹å‡»è·³è½¬é“¾æ¥ |

### ğŸ”Œ APIç«¯ç‚¹è§„èŒƒ

#### ä¸»æ•°æ®ç«¯ç‚¹ï¼š`/api/comprehensive_data`
```javascript
GET /api/comprehensive_data
Response: {
  success: true,
  data: {
    table_names: [...],
    column_names: [...],
    heatmap_data: {...},
    statistics: {...},
    table_details: [...]
  }
}
```

#### è¯¦ç»†æ•°æ®ç«¯ç‚¹ï¼š`/api/detailed_scores/<table_name>`
```javascript
GET /api/detailed_scores/è¡¨å
Response: {
  table_name: "è¡¨å",
  column_scores: {...},
  modified_rows: [...]
}
```

### ğŸ“Š UIç»„ä»¶å‚æ•°æµ

```
ç»¼åˆæ‰“åˆ†JSON â†’ Flask API â†’ Fetchè¯·æ±‚ â†’ React State â†’ Propsä¼ é€’ â†’ ç»„ä»¶æ¸²æŸ“
     â†“            â†“           â†“            â†“           â†“          â†“
  æ–‡ä»¶ç³»ç»Ÿ     HTTPæœåŠ¡    å¼‚æ­¥è·å–     çŠ¶æ€ç®¡ç†    ç»„ä»¶é€šä¿¡    ç•Œé¢å±•ç¤º
```

---

## ç¬¬äº”éƒ¨åˆ†ï¼šğŸš¨ æœåŠ¡å™¨é€‚é…å±‚å®ç°è§„èŒƒï¼ˆ2025-09-17 æ–°å¢ï¼‰

### å…³é”®æ•°æ®ç»“æ„è½¬æ¢

å½“APIæœåŠ¡å™¨åŠ è½½ç»¼åˆæ‰“åˆ†æ–‡ä»¶å¹¶å‡†å¤‡è¿”å›ç»™å‰ç«¯æ—¶ï¼Œ**å¿…é¡»è¿›è¡Œæ­£ç¡®çš„æ•°æ®ç»“æ„è½¬æ¢**ï¼š

#### 1. tablesæ•°ç»„æ„å»ºï¼ˆå…³é”®ï¼ï¼‰

```python
# âœ… æ­£ç¡®çš„tablesæ•°ç»„æ„å»º
tables = []
if 'table_details' in data:
    for table in data['table_details']:
        # ä»column_detailsèšåˆæ•°æ®
        column_modifications = {}
        all_modified_rows = set()

        if 'column_details' in table:
            for col_detail in table['column_details']:
                col_name = col_detail.get('column_name', '')
                modified_rows = col_detail.get('modified_rows', [])

                # å…³é”®ï¼šæ„å»ºå‰ç«¯éœ€è¦çš„æ•°æ®ç»“æ„
                column_modifications[col_name] = {
                    'modified_rows': modified_rows,  # å¿…é¡»åŒ…å«ï¼
                    'modification_count': col_detail.get('modification_count', 0),
                    'modification_details': col_detail.get('modification_details', [])
                }
                all_modified_rows.update(modified_rows)

        # æ„å»ºå‰ç«¯æœŸæœ›çš„è¡¨æ ¼ç»“æ„
        table_item = {
            'name': table.get('table_name', ''),
            'url': table.get('excel_url', ''),  # æ³¨æ„ï¼šæ˜¯excel_urlä¸æ˜¯table_url
            'risk_score': table.get('overall_risk_score', 0.05),
            'total_modifications': table.get('total_modifications', 0),
            'row_level_data': {
                'total_rows': table.get('total_rows', 100),
                'modified_rows': sorted(list(all_modified_rows)),
                'total_differences': table.get('total_modifications', 0),
                'column_modifications': column_modifications  # å…³é”®æ•°æ®ï¼
            }
        }
        tables.append(table_item)
```

#### 2. å­—æ®µæ˜ å°„å…³ç³»ï¼ˆé¿å‘æŒ‡å—ï¼‰

| ç»¼åˆæ‰“åˆ†æ–‡ä»¶å­—æ®µ | å‰ç«¯APIæœŸæœ›å­—æ®µ | å¸¸è§é”™è¯¯ |
|---------------|--------------|---------|
| `table_details[].excel_url` | `tables[].url` | âŒ ä½¿ç”¨table_url |
| `table_details[].overall_risk_score` | `tables[].risk_score` | âŒ å¿½ç•¥overallå‰ç¼€ |
| `table_details[].column_details` | `tables[].row_level_data.column_modifications` | âŒ ç›´æ¥ä¼ é€’column_details |
| `table_details[].total_rows` | `tables[].row_level_data.total_rows` | âŒ ä»é”™è¯¯å±‚çº§å–å€¼ |

#### 3. hover_dataè½¬æ¢

```python
# å¦‚æœhover_dataæ ¼å¼ä¸åŒ¹é…å‰ç«¯æœŸæœ›
if 'hover_data' in response_data and 'data' in response_data['hover_data']:
    hover_items = response_data['hover_data']['data']
    converted_hover_data = []

    for item in hover_items:
        if 'column_details' in item:
            # è½¬æ¢ä¸ºcolumn_modificationsæ•°ç»„æ ¼å¼
            column_mods = []
            for col_detail in item['column_details']:
                mod_count = col_detail.get('modification_count', 0)
                column_mods.append(mod_count)

            converted_item = {
                'table_index': item.get('table_index', 0),
                'column_modifications': column_mods  # å‰ç«¯æœŸæœ›çš„æ ¼å¼
            }
            converted_hover_data.append(converted_item)
```

#### 4. æ•°æ®å®Œæ•´æ€§éªŒè¯

é€‚é…å±‚å¿…é¡»éªŒè¯è¾“å‡ºæ•°æ®çš„å®Œæ•´æ€§ï¼š

```python
def validate_adapted_data(response_data):
    """éªŒè¯é€‚é…åçš„æ•°æ®ç»“æ„"""
    assert 'tables' in response_data, "ç¼ºå°‘tablesæ•°ç»„"

    for table in response_data['tables']:
        assert 'row_level_data' in table, f"è¡¨{table['name']}ç¼ºå°‘row_level_data"
        row_data = table['row_level_data']

        assert 'column_modifications' in row_data, "ç¼ºå°‘column_modifications"
        col_mods = row_data['column_modifications']

        assert len(col_mods) == 19, f"column_modificationsåº”åŒ…å«19åˆ—ï¼Œå®é™…{len(col_mods)}"

        for col_name, col_data in col_mods.items():
            assert 'modified_rows' in col_data, f"åˆ—{col_name}ç¼ºå°‘modified_rows"
            assert isinstance(col_data['modified_rows'], list), "modified_rowså¿…é¡»æ˜¯æ•°ç»„"
```

---

## ç¬¬å…­éƒ¨åˆ†ï¼šé›¶é™çº§åŸåˆ™ä¸é”™è¯¯å¤„ç†

### ğŸš« é›¶é™çº§åŸåˆ™

1. **ä¸å…è®¸è™šæ‹Ÿæ•°æ®**ï¼šç¦æ­¢ä½¿ç”¨randomç”Ÿæˆæ•°æ®
2. **ä¸å…è®¸é™çº§å›é€€**ï¼šç¼ºå¤±æ•°æ®æ—¶å¿…é¡»æŠ¥é”™ï¼Œä¸èƒ½ä½¿ç”¨é»˜è®¤å€¼
3. **ä¸å…è®¸è·³è¿‡éªŒè¯**ï¼šæ¯ä¸ªç¯èŠ‚éƒ½å¿…é¡»éªŒè¯æ•°æ®å®Œæ•´æ€§
4. **ä¸å…è®¸é™é»˜å¤±è´¥**ï¼šæ‰€æœ‰é”™è¯¯å¿…é¡»è®°å½•å¹¶é€šçŸ¥

### âš ï¸ é”™è¯¯å¤„ç†è§„èŒƒ

```python
# æ­£ç¡®çš„é”™è¯¯å¤„ç†
def load_comprehensive_data():
    try:
        with open(file_path, 'r') as f:
            data = json.load(f)
        validate_data_structure(data)  # å¼ºåˆ¶éªŒè¯
        return data
    except FileNotFoundError:
        logger.error(f"ç»¼åˆæ‰“åˆ†æ–‡ä»¶ä¸å­˜åœ¨: {file_path}")
        raise  # æŠ›å‡ºé”™è¯¯ï¼Œä¸é™çº§
    except ValidationError as e:
        logger.error(f"æ•°æ®éªŒè¯å¤±è´¥: {e}")
        raise  # æŠ›å‡ºé”™è¯¯ï¼Œä¸é™çº§
```

### âœ… æ•°æ®éªŒè¯æ£€æŸ¥ç‚¹

1. **CSVå¯¹æ¯”é˜¶æ®µ**ï¼šéªŒè¯æ–‡ä»¶å­˜åœ¨æ€§ã€æ ¼å¼æ­£ç¡®æ€§
2. **è¯¦ç»†æ‰“åˆ†é˜¶æ®µ**ï¼šéªŒè¯åˆ—ååŒ¹é…ã€æ•°å€¼èŒƒå›´
3. **ç»¼åˆæ‰“åˆ†é˜¶æ®µ**ï¼šéªŒè¯çŸ©é˜µç»´åº¦ã€å‚æ•°å®Œæ•´æ€§
4. **APIæœåŠ¡é˜¶æ®µ**ï¼šéªŒè¯æ•°æ®åŠ è½½ã€æ ¼å¼è½¬æ¢
5. **å‰ç«¯å±•ç¤ºé˜¶æ®µ**ï¼šéªŒè¯æ•°æ®æ¥æ”¶ã€æ¸²æŸ“æ­£ç¡®æ€§

---

## ç¬¬å…­éƒ¨åˆ†ï¼šé…ç½®ç®¡ç†è§„èŒƒ

### ğŸ¯ é…ç½®æ–‡ä»¶ç»Ÿä¸€ç®¡ç†

æ‰€æœ‰é…ç½®æ–‡ä»¶é›†ä¸­å­˜æ”¾åœ¨ `/root/projects/tencent-doc-manager/config/` ç›®å½•ï¼š

```
config/
â”œâ”€â”€ standard_columns.json    # æ ‡å‡†åˆ—å®šä¹‰ï¼ˆæœ¬è§„èŒƒçš„JSONç‰ˆæœ¬ï¼‰
â”œâ”€â”€ scoring_algorithm.json   # æ‰“åˆ†ç®—æ³•å‚æ•°
â”œâ”€â”€ risk_levels.json         # L1/L2/L3åˆ†çº§é…ç½®
â”œâ”€â”€ column_weights.json      # åˆ—æƒé‡é…ç½®
â”œâ”€â”€ real_documents.json      # æ–‡æ¡£é…ç½®
â”œâ”€â”€ cookies.json            # Cookieå­˜å‚¨
â””â”€â”€ ui_config.json          # UIæ˜¾ç¤ºé…ç½®
```

### ğŸ“ é…ç½®ä¼˜å…ˆçº§

1. **è§„èŒƒå®šä¹‰** > é…ç½®æ–‡ä»¶ > ä»£ç ç¡¬ç¼–ç 
2. æœ¬è§„èŒƒæ˜¯æœ€é«˜ä¼˜å…ˆçº§çš„æƒå¨å®šä¹‰
3. é…ç½®æ–‡ä»¶ç”¨äºè¿è¡Œæ—¶å‚æ•°è°ƒæ•´
4. ä»£ç ä¸­ä¸åº”ç¡¬ç¼–ç ä»»ä½•å¯é…ç½®é¡¹

---

## ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æ–½æŒ‡å—

### ğŸ”§ ä»£ç åŒæ­¥è¦æ±‚

1. **standard_columns_config.py** - å¿…é¡»ä¸æœ¬è§„èŒƒå®Œå…¨ä¸€è‡´
2. **comparison_to_scoring_adapter.py** - L1/L2/L3åˆ†ç±»å¿…é¡»åŒæ­¥
3. **comprehensive_score_generator_v2.py** - æ‰“åˆ†ç®—æ³•å¿…é¡»ç»Ÿä¸€
4. **final_heatmap_server.py** - APIæ•°æ®æ ¼å¼å¿…é¡»è§„èŒƒ

### ğŸ“ æ–‡æ¡£ç»´æŠ¤

- æœ¬è§„èŒƒæ˜¯å”¯ä¸€çš„æƒå¨å®šä¹‰æ–‡æ¡£
- ä»»ä½•åˆ—å®šä¹‰ã€æ‰“åˆ†ç®—æ³•çš„ä¿®æ”¹å¿…é¡»å…ˆæ›´æ–°æœ¬è§„èŒƒ
- ä»£ç å®ç°å¿…é¡»ä¸¥æ ¼éµå¾ªæœ¬è§„èŒƒ

### ğŸ” éªŒè¯å·¥å…·

ä½¿ç”¨ `/root/projects/tencent-doc-manager/validate_ui_data_mapping.py` éªŒè¯å®ç°ç¬¦åˆæ€§

```bash
python3 validate_ui_data_mapping.py
```

---

## é™„å½•ï¼šå˜æ›´å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ |
|------|------|---------|
| 4.0 | 2025-09-16 | ç»Ÿä¸€è§„èŒƒï¼Œåˆå¹¶UIå‚æ•°ï¼Œæ›´æ–°æ ‡å‡†åˆ— |
| 3.0 | 2025-09-16 | ä¿®å¤é™çº§é—®é¢˜ |
| 2.0 | 2025-09-13 | æ·»åŠ L1/L2/L3åˆ†çº§ |
| 1.0 | 2025-09-10 | åˆå§‹ç‰ˆæœ¬ |

---

**ç»´æŠ¤è¯´æ˜**: æœ¬è§„èŒƒæ˜¯ç³»ç»Ÿçš„æ ¸å¿ƒæŠ€æœ¯æ–‡æ¡£ï¼Œä»»ä½•ä¿®æ”¹éœ€è¦ç»è¿‡ä¸¥æ ¼è¯„å®¡ã€‚