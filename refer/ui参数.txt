# 智能热力图系统需要的完整输入参数列表：

## 基于代码分析，这个智能热力图系统需要以下完整的参数输入体系：
## 📊 一、表格基础数据
### 1.1 表格元信息
```javascript
{
  tableCount: 30,                    // 表格总数量
  tables: [
    {
      id: 0,                         // 表格唯一标识
      name: "项目管理主计划表",        // 表格显示名称
      url: "https://docs.qq.com/...", // 表格跳转链接
      columns: [...],                // 该表格包含的列名数组
      avgRisk: 0.65,                 // 表格平均风险分数
      maxCellRisk: 0.92,             // 表格最高风险分数
      criticalModifications: 3,       // 严重修改数量
      totalRisk: 12.8,               // 风险总分
      columnRiskLevels: {...}        // 列风险等级配置
    }
  ]
}

```
### 1.2 列配置数据
```javascript
{
  standardColumns: [                 // 标准列名数组（19个）
    "序号", "项目类型", "来源", "任务发起时间", "目标对齐",
    "关键KR对齐", "具体计划内容", "邓总指导登记", "负责人",
    "协助人", "监督人", "重要程度", "预计完成时间", "完成进度",
    "形成计划清单", "复盘时间", "对上汇报", "应用情况", "进度分析总结"
  ],
  columnRiskLevels: {               // 列风险等级配置
    "序号": "L3",
    "项目类型": "L2", 
    "来源": "L1",
    // ... 每列的风险等级(L1/L2/L3)
  }
}

```
## 🔥 二、热力图核心数据
### 2.1 风险评分矩阵
```javascript
{
  heatData: [                       // 30×19的风险分数矩阵
    [0.85, 0.65, 0.0, 0.92, ...],  // 第1个表格的19列分数
    [0.78, 0.55, 0.88, 0.0, ...],  // 第2个表格的19列分数
    // ... 30行数据
  ],
  riskScoreRange: {
    min: 0.05,                      // 最小风险分数
    max: 1.0,                       // 最大风险分数
    mean: 0.48,                     // 平均风险分数
    median: 0.52,                   // 中位数风险分数
    p95: 0.86                       // 95分位数
  }
}

```
### 2.2 热力聚集配置
```javascript
{
  criticalColumns: [2, 3, 4, 5, 11, 12, 13], // 需要热力增强的列索引
  enhancementFactors: {
    L1: 1.3,                       // L1列增强倍数
    L2: 1.0,                       // L2列不增强
    L3: 1.0,                       // L3列不增强
    topRows: 0.1                   // 顶部行位置权重
  }
}

```
## 📈 三、表格内部修改分布数据
### 3.1 修改模式配置
```javascript
{
  modificationPatterns: [
    {
      tableId: 0,
      tableName: "项目管理主计划表",
      rowOverallIntensity: 0.65,    // 整体修改强度(静态柱状图用)
      columnPatterns: {
        "来源": {
          totalRows: 35,            // 表格总行数
          modifiedRows: 7,          // 被修改的行数
          modificationRate: 0.2,    // 修改率
          modifiedRowNumbers: [2, 5, 8, 15, 23, 28, 33], // 具体修改的行号
          rowIntensities: {         // 每行的修改强度
            2: 0.8,
            5: 0.6,
            // ...
          },
          pattern: "top_heavy",     // 修改模式类型
          riskLevel: "L1",          // 风险等级
          medianRow: 15             // 修改位置中位数
        }
        // ... 其他列的模式
      }
    }
    // ... 其他表格
  ]
}

```
### 3.2 修改模式类型
```javascript
{
  patternTypes: [
    "top_heavy",                    // 顶部集中修改
    "bottom_heavy",                 // 底部集中修改  
    "middle_heavy",                 // 中间集中修改
    "scattered",                    // 分散修改
    "clustered"                     // 聚集修改
  ]
}

```
## 🎨 四、视觉配置参数
### 4.1 布局尺寸参数
```javascript
{
  layout: {
    leftLabelWidth: 128,            // 左侧标签宽度
    cellWidth: 32,                  // 热力图单元格宽度
    cellHeight: 28,                 // 热力图单元格高度
    headerHeight: 70,               // 顶部标题高度
    distributionWidth: 250,         // 右侧分布图宽度
    distributionChartWidth: 240     // 分布图表内容宽度
  }
}

```
### 4.2 色彩映射参数
```javascript
{
  colorMapping: {
    colorSteps: 5,                  // 色彩分段数(蓝→青→绿→黄→红)
    bloodRedThreshold: 0.8,         // 深血红色阈值
    emptyColor: "#f1f5f9",         // 空白单元格颜色
    riskLevelColors: {              // 风险等级颜色
      L1: "#dc2626",
      L2: "#f59e0b", 
      L3: "#10b981"
    }
  }
}

```
### 4.3 高斯平滑参数
```javascript
{
  gaussianSmooth: {
    kernelSize: 7,                  // 高斯核尺寸
    sigma: 2.5,                     // 高斯σ值
    hotspotCount: 10                // 热源数量
  }
}

```
## 🎛️ 五、交互功能参数
### 5.1 悬浮提示配置
```javascript
{
  tooltip: {
    offsetX: 15,                    // 鼠标右偏移距离
    offsetY: -10,                   // 鼠标上偏移距离
    minWidth: 200,                  // 最小宽度
    zIndex: 50,                     // 层级
    borderPadding: 10               // 边界安全距离
  }
}

```
### 5.2 链接跳转配置
```javascript
{
  links: {
    baseUrl: "https://docs.qq.com/sheet/", // 基础URL
    target: "_blank",               // 打开方式
    hoverEffect: "underline"        // 悬浮效果
  }
}

```
## 📊 六、统计数据参数
### 6.1 热力统计
```javascript
{
  statistics: {
    totalCells: 570,                // 总数据点
    hotspots: 45,                   // 热点数量(>0.7)
    criticalCells: 12,              // 极高风险数量(>0.9)
    emptyChells: 85,                // 空白单元格数量
    mutatedTables: 8                // 变异表格数量(列数不标准)
  }
}

```
### 6.2 算法性能参数
```javascript
{
  performance: {
    renderMode: "canvas",           // 渲染模式
    smoothingQuality: "high",       // 平滑质量
    updateFrequency: 60,            // 更新频率(FPS)
    cacheEnabled: true              // 缓存开启
  }
}

```
## 🔧 七、UI状态控制参数
### 7.1 显示开关
```javascript
{
  uiControls: {
    showGrid: false,                // 网格线显示
    showContours: false,            // 等高线显示
    showAnalysis: true,             // 分析面板显示
    distributionMode: "static"      // 分布图模式(static/hover)
  }
}

```
### 7.2 分析面板配置
```javascript
{
  analysisPanel: {
    topTableCount: 10,              // 显示的顶部表格数量
    maxScrollHeight: 264,           // 面板最大滚动高度
    panelCount: 3                   // 分析面板数量
  }
}

```
## 📝 八、数据格式要求
### 8.1 输入数据格式
```javascript
// 表格原始数据格式
{
  tableId: String,                  // 必需，唯一标识
  tableName: String,                // 必需，显示名称
  tableUrl: String,                 // 必需，跳转链接
  columns: Array<String>,           // 必需，包含的列名
  modifications: {                  // 必需，修改记录
    [columnName]: {
      riskScore: Number,            // 0-1的风险分数
      modifiedRows: Array<Number>,  // 修改的行号
      rowIntensities: Object        // 行强度映射
    }
  }
}

```
### 8.2 输出数据格式
```javascript
// 系统输出的处理后数据
{
  sortedTables: Array,              // 排序后的表格
  heatmapMatrix: Array<Array>,      // 热力图矩阵
  statisticsData: Object,           // 统计信息
  interactionState: Object          // 交互状态
}

```
## 🔄 九、实时更新参数
### 9.1 数据同步配置
```javascript
{
  dataSync: {
    updateInterval: 30000,          // 数据更新间隔(毫秒)
    batchSize: 50,                  // 批处理大小
    retryAttempts: 3,               // 重试次数
    timeoutDuration: 5000           // 超时时间
  }
}

```
## 📋 总结
这个热力图系统总共需要 9大类约150+个具体参数，涵盖了从原始数据到最终UI呈现的完整链路。核心必需参数包括：
必需输入：表格元信息(30个)、列配置(19个)、风险分数矩阵(570个数据点)、修改分布模式(30个表格×19列)
可选配置：UI布局(10+个)、色彩映射(15+个)、交互控制(10+个)、性能优化(8+个)
动态状态：统计数据(6个)、用户交互状态(5+个)、实时更新配置(4个)
这个参数体系确保了系统的完整性、可配置性和扩展性。

## 📋 一、表格基础信息输入
### 1.1 表格元数据
```javascript
{
  tableBasicInfo: [
    {
      tableId: "table_001",                    // 表格唯一ID
      tableName: "项目管理主计划表",            // 表格显示名称  
      tableUrl: "https://docs.qq.com/...",    // 腾讯文档链接
      totalRows: 45,                          // 表格总行数
      actualColumns: ["序号", "项目类型", "来源", ...], // 该表格实际包含的列
      lastModified: "2025-01-15T10:30:00Z",   // 最后修改时间
      owner: "张三",                          // 表格负责人
      department: "产品部"                     // 所属部门
    }
    // ... 30个表格的基础信息
  ]
}

```
## 📊 二、列级修改数据输入（核心数据）
### 2.1 每表格每列的详细修改记录
```javascript
{
  tableModifications: {
    "table_001": {                            // 表格ID
      "来源": {                               // 列名
        totalRows: 45,                        // 该表格总行数
        modifiedRowCount: 8,                  // 被修改的行数
        modifiedRows: [                       // 具体被修改的行详情
          {
            rowNumber: 3,                     // 行号
            modificationIntensity: 0.85,      // 该行修改强度 (0-1)
            modificationCount: 3,             // 修改次数
            lastModified: "2025-01-15T09:20:00Z", // 最后修改时间
            modifier: "李四",                 // 修改人
            changeType: "content_update",     // 修改类型
            severity: "high"                  // 严重程度
          },
          {
            rowNumber: 7,
            modificationIntensity: 0.65,
            modificationCount: 1,
            lastModified: "2025-01-14T16:45:00Z",
            modifier: "王五",
            changeType: "value_change",
            severity: "medium"
          }
          // ... 其他被修改的行
        ],
        columnAverageIntensity: 0.42,         // 该列平均修改强度
        columnMaxIntensity: 0.85,             // 该列最高修改强度
        columnMinIntensity: 0.15,             // 该列最低修改强度
        modificationPattern: "top_heavy",     // 修改分布模式
        riskLevel: "L1",                      // 列风险等级
        totalModifications: 15,               // 总修改次数
        uniqueModifiers: ["李四", "王五", "赵六"] // 修改人列表
      },
      "项目类型": {
        // ... 同样的结构
      }
      // ... 该表格所有列的修改数据
    },
    "table_002": {
      // ... 第2个表格的所有列修改数据
    }
    // ... 30个表格的完整修改数据
  }
}

```
### 2.2 修改强度计算参数
```javascript
{
  intensityCalculation: {
    weightingFactors: {                       // 修改强度权重因子
      modificationCount: 0.3,                 // 修改次数权重
      changeComplexity: 0.25,                 // 变更复杂度权重  
      riskLevel: 0.35,                        // 风险等级权重
      timeRecency: 0.1                        // 时间新近度权重
    },
    severityMapping: {                        // 严重程度映射
      "low": 0.2,
      "medium": 0.5, 
      "high": 0.8,
      "critical": 1.0
    },
    changeTypeWeights: {                      // 修改类型权重
      "content_update": 0.6,
      "value_change": 0.7,
      "structure_change": 0.9,
      "deletion": 1.0,
      "insertion": 0.8
    }
  }
}

```
## 🏷️ 三、列配置信息输入
### 3.1 列风险等级配置
```javascript
{
  columnConfiguration: {
    standardColumns: [                        // 标准列名列表
      "序号", "项目类型", "来源", "任务发起时间", "目标对齐",
      "关键KR对齐", "具体计划内容", "邓总指导登记", "负责人",
      "协助人", "监督人", "重要程度", "预计完成时间", "完成进度",
      "形成计划清单", "复盘时间", "对上汇报", "应用情况", "进度分析总结"
    ],
    columnRiskLevels: {                       // 列风险等级
      "序号": "L3",
      "项目类型": "L2",
      "来源": "L1",
      // ... 19个列的风险等级
    },
    columnBusinessImportance: {               // 业务重要性评分
      "来源": 0.95,
      "目标对齐": 0.92,
      "重要程度": 0.88,
      // ... 每列的业务重要性(0-1)
    },
    columnModificationFrequency: {            // 列修改频率基线
      "来源": 0.1,                           // 预期修改频率
      "具体计划内容": 0.6,
      "进度分析总结": 0.8
      // ... 每列的正常修改频率
    }
  }
}

```
### 3.2 列语义分析配置
```javascript
{
  columnSemantics: {
    forbiddenColumns: [                       // 绝对禁止修改的列
      "来源", "任务发起时间", "目标对齐", "关键KR对齐", 
      "重要程度", "预计完成时间", "完成进度"
    ],
    protectedColumns: [                       // 需要审核的列
      "具体计划内容", "邓总指导登记", "负责人", 
      "协助人", "监督人", "形成计划清单"
    ],
    freeEditColumns: [                        // 自由编辑的列
      "序号", "复盘时间", "对上汇报", "应用情况", "进度分析总结"
    ],
    columnDataTypes: {                        // 列数据类型
      "序号": "number",
      "任务发起时间": "datetime",
      "目标对齐": "text",
      "完成进度": "percentage"
      // ... 每列的数据类型
    }
  }
}

```
## ⚙️ 四、时间和历史数据输入
### 4.1 时间范围参数
```javascript
{
  timeConfiguration: {
    analysisStartDate: "2025-01-01T00:00:00Z", // 分析开始时间
    analysisEndDate: "2025-01-15T23:59:59Z",   // 分析结束时间
    timeZone: "Asia/Shanghai",                  // 时区
    workingHours: {                            // 工作时间
      start: "09:00",
      end: "18:00",
      workdays: [1, 2, 3, 4, 5]               // 周一到周五
    },
    holidayDates: [                            // 节假日列表
      "2025-01-01", "2025-02-10"
    ]
  }
}

```
### 4.2 历史基线数据
```javascript
{
  historicalBaseline: {
    previousPeriodData: {                      // 上期数据（用于对比）
      avgModificationRate: 0.35,
      hotspotCount: 28,
      criticalModifications: 8
    },
    trendData: [                              // 趋势数据
      {
        date: "2025-01-01",
        modificationCount: 45,
        riskScore: 0.65
      }
      // ... 每日趋势数据
    ],
    seasonalPatterns: {                       // 季节性模式
      "monday": 1.2,                          // 周一修改系数
      "friday": 0.8,                         // 周五修改系数
      "month_end": 1.5                       // 月末修改系数
    }
  }
}

```
## 👥 五、用户和权限信息输入
### 5.1 用户信息
```javascript
{
  userContext: {
    currentUser: {
      userId: "user_001",
      userName: "张三",
      department: "产品部",
      role: "项目经理",
      permissions: ["read", "write", "audit"],
      accessLevel: "manager"
    },
    teamMembers: [                            // 团队成员列表
      {
        userId: "user_002",
        userName: "李四", 
        role: "开发工程师",
        modificationCount: 25
      }
      // ... 团队成员信息
    ]
  }
}

```
### 5.2 审计和合规要求
```javascript
{
  complianceRequirements: {
    auditTrailRequired: true,                 // 是否需要审计轨迹
    approvalWorkflow: {                       // 审批流程
      "L1": ["manager", "director"],          // L1级别需要的审批角色
      "L2": ["manager"],
      "L3": []
    },
    retentionPeriod: 365,                     // 数据保留天数
    sensitivityLevel: "high"                  // 敏感级别
  }
}

```
## 🎯 六、业务规则输入
### 6.1 风险评估规则
```javascript
{
  riskAssessmentRules: {
    thresholds: {                             // 风险阈值
      lowRisk: 0.3,
      mediumRisk: 0.6,
      highRisk: 0.8,
      criticalRisk: 0.9
    },
    escalationRules: {                        // 升级规则
      criticalAlert: {                        // 严重告警条件
        threshold: 0.9,
        notifyRoles: ["manager", "director"],
        cooldownPeriod: 3600                  // 冷却期(秒)
      }
    },
    businessImpactFactors: {                  // 业务影响因子
      customerFacing: 1.5,                    // 面向客户的影响系数
      financialImpact: 1.3,                   // 财务影响系数
      complianceImpact: 1.8                   // 合规影响系数
    }
  }
}

```
### 6.2 自动化规则
```javascript
{
  automationRules: {
    autoBlockConditions: [                    // 自动阻止条件
      {
        condition: "L1_column_modification",
        action: "block",
        message: "L1级别列禁止修改"
      }
    ],
    autoApprovalConditions: [                 // 自动批准条件
      {
        condition: "L3_column_minor_change",
        threshold: 0.2,
        action: "auto_approve"
      }
    ],
    notificationTriggers: [                   // 通知触发器
      {
        condition: "high_risk_modification",
        recipients: ["team_lead", "manager"],
        channels: ["email", "slack"]
      }
    ]
  }
}

```
## 🖥️ 七、UI个性化输入
### 7.1 显示偏好
```javascript
{
  uiPreferences: {
    colorScheme: "default",                   // 色彩方案
    densityLevel: "normal",                   // 显示密度
    defaultView: "heatmap",                   // 默认视图
    showTooltips: true,                       // 显示提示
    animationEnabled: true,                   // 启用动画
    refreshInterval: 30,                      // 刷新间隔(秒)
    language: "zh-CN"                         // 语言设置
  }
}

```
### 7.2 过滤和排序偏好
```javascript
{
  filterPreferences: {
    defaultSort: "risk_desc",                 // 默认排序
    visibleColumns: [...],                    // 可见列
    hiddenTables: [...],                      // 隐藏的表格
    riskLevelFilter: ["L1", "L2", "L3"],     // 风险等级过滤
    dateRangeFilter: {                        // 日期范围过滤
      start: "2025-01-01",
      end: "2025-01-15"
    },
    userFilter: [],                           // 用户过滤
    departmentFilter: []                      // 部门过滤
  }
}

```
## 📊 八、系统集成参数
### 8.1 数据源配置
```javascript
{
  dataSourceConfig: {
    tencentDocsApi: {                         // 腾讯文档API配置
      baseUrl: "https://docs.qq.com/api/",
      apiKey: "your_api_key",
      refreshToken: "your_refresh_token",
      rateLimitPerHour: 1000
    },
    databaseConfig: {                         // 数据库配置
      connectionString: "...",
      queryTimeout: 30000,
      maxConnections: 10
    },
    cacheConfig: {                            // 缓存配置
      enabled: true,
      ttl: 3600,                             // 生存时间(秒)
      maxSize: "100MB"
    }
  }
}

```
### 8.2 外部系统集成
```javascript
{
  integrationConfig: {
    slackIntegration: {                       // Slack集成
      webhookUrl: "https://hooks.slack.com/...",
      channel: "#project-alerts",
      enabled: true
    },
    emailNotification: {                      // 邮件通知
      smtpServer: "smtp.company.com",
      fromAddress: "alerts@company.com",
      templates: {
        "high_risk": "template_001",
        "critical": "template_002"
      }
    },
    auditSystem: {                           // 审计系统
      apiEndpoint: "https://audit.company.com/api/",
      apiKey: "audit_api_key",
      eventTypes: ["modification", "access", "export"]
    }
  }
}

```
## 📋 完整输入参数汇总
### 核心必需输入参数：
1. 表格基础信息 (30个表格 × 8个字段 = 240个参数)
2. 详细修改记录 (30个表格 × 19列 × 平均8行修改 = 4,560个具体修改记录)
3. 列配置信息 (19列 × 5个配置项 = 95个参数)
4. 用户和权限 (用户信息 + 团队信息 = 50+个参数)
### 可选配置参数：
1. 时间和历史数据 (基线数据 + 趋势数据 = 100+个参数)
2. 业务规则配置 (风险规则 + 自动化规则 = 80+个参数)
3. UI个性化设置 (显示偏好 + 过滤设置 = 40+个参数)
4. 系统集成配置 (API配置 + 外部集成 = 60+个参数)
### 总计约 5,200+个具体输入参数
其中最核心的是表格修改记录数据，这部分数据量最大且最复杂，包含了每个表格每列每行的详细修改情况，是整个热力图系统的数据基础。