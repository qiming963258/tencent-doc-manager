<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>腾讯文档变更监控 - 热力图分析</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .heat-container {
            font-family: ui-monospace, SFMono-Regular, "SF Mono", Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        }
        .heat-container * {
            box-sizing: border-box;
        }
        .error-display {
            background-color: #fee2e2;
            border: 1px solid #fca5a5;
            border-radius: 4px;
            padding: 16px;
            margin: 16px;
            font-family: monospace;
            color: #991b1b;
        }
    </style>
</head>
<body>
    <div id="root">
        <div style="padding: 20px; text-align: center; color: #666;">
            <div style="font-size: 18px; margin-bottom: 10px;">⏳ 正在加载完整原版热力图UI...</div>
            <div style="font-size: 14px;">如果长时间未显示，请检查控制台错误信息</div>
        </div>
    </div>

    <script type="text/babel">
        // 错误边界组件
        class ErrorBoundary extends React.Component {
            constructor(props) {
                super(props);
                this.state = { hasError: false, error: null };
            }

            static getDerivedStateFromError(error) {
                return { hasError: true, error };
            }

            componentDidCatch(error, errorInfo) {
                console.error('React渲染错误:', error, errorInfo);
            }

            render() {
                if (this.state.hasError) {
                    return React.createElement('div', {
                        className: 'error-display'
                    }, [
                        React.createElement('h2', { key: 'title' }, '原版UI加载错误'),
                        React.createElement('p', { key: 'error' }, this.state.error?.toString()),
                        React.createElement('p', { key: 'help' }, '请检查控制台获取详细错误信息')
                    ]);
                }

                return this.props.children;
            }
        }

        // 简单测试组件
        function SimpleTest() {
            const [count, setCount] = React.useState(0);
            
            React.useEffect(() => {
                console.log('React组件已成功渲染！');
                setCount(1);
            }, []);

            return React.createElement('div', {
                style: {
                    padding: '20px',
                    textAlign: 'center',
                    backgroundColor: '#f0f9ff',
                    border: '1px solid #0ea5e9',
                    borderRadius: '8px',
                    margin: '20px'
                }
            }, [
                React.createElement('h1', { 
                    key: 'title',
                    style: { color: '#0369a1', marginBottom: '10px' }
                }, '✅ React 18 加载成功'),
                React.createElement('p', { 
                    key: 'status',
                    style: { color: '#0c4a6e' }
                }, `测试计数器: ${count}`),
                React.createElement('button', {
                    key: 'button',
                    onClick: () => setCount(count + 1),
                    style: {
                        padding: '8px 16px',
                        backgroundColor: '#0ea5e9',
                        color: 'white',
                        border: 'none',
                        borderRadius: '4px',
                        cursor: 'pointer',
                        marginTop: '10px'
                    }
                }, '点击测试'),
                React.createElement('div', {
                    key: 'loading-info',
                    style: {
                        marginTop: '20px',
                        padding: '10px',
                        backgroundColor: '#fef3c7',
                        border: '1px solid #f59e0b',
                        borderRadius: '4px',
                        fontSize: '14px'
                    }
                }, '正在准备加载完整的原版热力图UI...')
            ]);
        }

        // 尝试渲染测试组件
        try {
            const root = ReactDOM.createRoot(document.getElementById('root'));
            root.render(
                React.createElement(ErrorBoundary, null,
                    React.createElement(SimpleTest)
                )
            );
            console.log('✅ React渲染测试成功');
        } catch (error) {
            console.error('❌ React渲染失败:', error);
            document.getElementById('root').innerHTML = `
                <div class="error-display">
                    <h2>React渲染失败</h2>
                    <p>${error.message}</p>
                    <p>请检查控制台获取详细信息</p>
                </div>
            `;
        }
    </script>
</body>
</html>